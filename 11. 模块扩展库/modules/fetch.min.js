class m{constructor(c){this.res=c}text(){const c=this;return new Promise(function(a,d){function b(){clearTimeout(f);a(e)}let f,e="";c.res.on("data",function(g){e+=g});c.res.on("close",b);f=setTimeout(function(){c.res.removeListener("close",b);d("FetchRequest Timed-Out!")},5E3)})}json(){return this.text().then(JSON.parse)}}const n=require("http");exports=function(c,a){a=a||{};const d=a.body||a.data;d&&(a.headers["Content-Length"]=d.length);delete a.body;delete a.data;const b=
a.signal;b&&delete a.signal;a.method&&(a.method=a.method.toUpperCase());const f=Object.assign(url.parse(c),a);let e=!1;return new Promise(function(g,h){if(b)b.on("abort",function(){e=!0;h("Fetch Error: REQUEST ABORTED.")});const l=n.request(f,function(k){try{b&&b.removeAllListeners("abort");if(e)throw Error("Request Aborted.");g(new m(k))}catch(p){h("Could Not Create FetchResponse Object: "+p)}});l.on("error",function(k){h("HTTP Error: "+k)});l.end(d)})}